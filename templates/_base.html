{% load static %}
<!DOCTYPE html>
<html>
<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"> -->

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  
  <!-- Latest compiled JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

  <style>
    html {
      position: relative;
      min-height: 100%;
    }
    body {
      margin-bottom: 65px; /* Margin bottom by footer height */
    }
    .footer {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 60px; /* Set the fixed height of the footer here */
      line-height: 60px; /* Vertically center the text there */
      background-color: #f5f5f5;
    }    
  </style>

<link rel="shortcut icon" type="image/png" href="{% static 'images/favicon.ico' %}"/>
  <script>
    var dropdownElementList = [].slice.call(document.querySelectorAll('.dropdown-toggle'))
      var dropdownList = dropdownElementList.map(function (dropdownToggleEl) {
        return new bootstrap.Dropdown(dropdownToggleEl)
      })
    </script>

  <title>{% block title %}MI - Clock Repair{% endblock title %}</title>
</head>
<body>
  <header>
    <div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm">
      <a href="{% url 'home' %}" class="navbar-brand my-0 mr-md-auto font-weight-normal">MI - Clock Repair</a>
    <!-- Fixed navbar -->
    <ul class="nav nav-pills">
    {% if user.is_authenticated %}
      {% if request.COOKIES.user_type == 'customer' %}
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">My Information</a>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="{% url 'addresses' %}">Addresss</a></li>
          <li><a class="dropdown-item" href="{% url 'customer_clocks' %}">Clocks</a></li>
          <li><a class="dropdown-item" href="{% url 'customer_workorders' %}">Workorders</a></li>
          <li><a class="dropdown-item" href="{% url 'account_email' %}">Email</a></li>
        </ul>
      </li>
        {% elif request.COOKIES.user_type == 'repairer' %}
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">My Information</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="{% url 'addresses' %}">Address</a></li>
            <li><a class="dropdown-item" href="{% url 'repairer_workorders' %}">Workorders</a></li>
            <li><a class="dropdown-item" href="{% url 'account_email' %}">Email</a></li>
          </ul>
        </li>
        {% endif %}
    {% endif %}
      <li class="nav-item">
        <a class="nav-link" href="{% url 'about' %}">About</a>
      </li>
    {% if user.is_authenticated %}
        <li class="nav-item">
          <a class="nav-link" href="{% url 'account_logout' %}">Log Out | {{ user.email }}</a>
        </li>
        {% else %}
        <li class="nav-item">
          <a class="nav-link" href="{% url 'account_login' %}">Log In</a>
        </li>
        <li class="nav-item">
          <a class="btn btn-outline-primary" href="{% url 'account_signup' %}">Sign Up</a>
      </li>
      {% endif %}
    </ul>
  </div>
</header>
  <div class="container">
    {% block content %}
    {% endblock content %}
  </div>
<!-- Option 1: Bootstrap Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>

{% if not user.is_authenticated %}
<footer class="footer fixed-bottom">
  <div class="container">
    <div class="row">
      <div class="col"><a href="{% url 'account_login' %}">Log In</a></div>
      <div class="col"><a href="{% url 'account_signup' %}">Sign Up</a></div>
    </div>  
  </div>  
</footer>
{% endif %}
</body>
</html>
